# 📕 ST Memory Books - AI 채팅 기억 보조 도구

**끝없는 채팅 대화를 체계적이고 검색 가능한 기억으로 바꿔보세요!**

봇이 내용을 기억하길 원하지만 문맥(Context)이 너무 길어졌나요? 줄거리를 잃지 않기 위해 수동으로 메모하는 것이 귀찮으신가요? ST Memory Books(STMB)는 바로 이런 문제를 해결해 줍니다. 이 확장 프로그램은 채팅을 지켜보다가 스마트한 요약을 생성하여 다시는 이야기의 흐름을 놓치지 않게 도와줍니다.

(기술적인 작동 원리가 궁금하신가요? [STMB 작동 원리(영문)](https://www.google.com/search?q=userguides%5ChowSTMBworks-en.md) 문서를 참고하세요.)

---

## 🚀 빠른 시작 (첫 번째 기억 생성까지 5분!)

**ST Memory Books가 처음이신가요?** 몇 번의 클릭만으로 첫 번째 자동 기억을 설정해 봅시다.

### 1단계: 확장 프로그램 찾기

* 채팅 입력창 옆에 있는 마법 지팡이 아이콘(🪄)을 찾으세요.
* 아이콘을 클릭한 후 **"Memory Books"**를 선택하세요.
* ST Memory Books 제어 패널이 열립니다.

### 2단계: 자동 기능(Auto-Magic) 켜기

* 제어 패널에서 **"Auto-Summary(자동 요약)"** 항목을 찾으세요.
* 스위치를 **ON**으로 켭니다.
* 기억 생성 주기를 **20-30 메시지**로 설정하세요 (처음 시작하기 좋은 값입니다).
* 이제 끝입니다! 🎉

### 3단계: 평소처럼 채팅하기

* 평소대로 대화를 계속하세요.
* 20-30개의 새로운 메시지가 쌓이면, ST Memory Books가 자동으로 다음 작업을 수행합니다:
* 가장 적절한 장면 경계(Scene boundary) 선택
* AI에게 요약 작성 요청
* 기억 컬렉션(Memory collection)에 저장
* 완료 시 알림 표시



**축하합니다!** 이제 자동 기억 관리 시스템이 구축되었습니다. 더 이상 지난 챕터의 내용을 잊어버릴 걱정이 없습니다!

---

## 💡 ST Memory Books의 실제 기능

ST Memory Books를 채팅 대화를 위한 **개인 AI 사서**라고 생각해보세요:

### 🤖 **자동 요약 (Automatic Summaries)**

*"신경 쓰고 싶지 않아요, 그냥 알아서 해주세요"*

* 백그라운드에서 채팅을 감시합니다.
* 매 X 메시지마다 자동으로 기억을 생성합니다.
* 긴 롤플레이, 창작 글쓰기, 장편 스토리에 완벽합니다.

### ✋ **수동 기억 생성 (Manual Memory Creation)**

*"무엇을 저장할지 직접 정하고 싶어요"*

* 간단한 화살표 버튼(► ◄)으로 중요한 장면을 표시합니다.
* 특별한 순간에 대해 원할 때 즉시 기억을 생성합니다.
* 핵심 줄거리나 캐릭터의 변화를 포착하는 데 좋습니다.

### 📊 **사이드 프롬프트 & 스마트 트래커 (Side Prompts)**

*"관계도, 플롯, 스탯 등을 추적하고 싶어요"*

* 기억 생성 시 함께 실행되는 재사용 가능한 프롬프트 조각들입니다.
* 바로 사용할 수 있는 템플릿 라이브러리를 제공합니다.
* 원하는 것은 무엇이든 추적하는 커스텀 AI 프롬프트를 만들 수 있습니다.
* 점수판, 관계 상태, 줄거리 요약 등을 자동으로 업데이트합니다.
* 예시: "누가 누구를 좋아하는가?", "현재 퀘스트 상태", "캐릭터 기분 추적기"

### 📚 **기억 컬렉션 (Memory Collections)**

*모든 기억이 살아 숨 쉬는 곳*

* 자동으로 정리되고 검색 가능합니다.
* SillyTavern에 내장된 로어북(Lorebook) 시스템과 연동됩니다.
* AI가 새로운 대화에서 과거의 기억을 참조할 수 있습니다.

---

## 🎯 사용 스타일 선택

<details>
<summary><strong>🔄 "설정 후 잊기" (초보자 추천)</strong></summary>

**추천 대상:** 그냥 알아서 잘 작동하는 자동화를 원하시는 분

**작동 방식:**

1. 설정에서 "Auto-Summary"를 켭니다.
2. 기억 생성 빈도를 선택합니다 (20~50 메시지가 적당함).
3. 평소처럼 채팅하세요 - 기억이 자동으로 생성됩니다!

**장점:**

* 수동 작업 불필요
* 일관된 기억 생성
* 중요한 이야기 흐름을 놓치지 않음
* 1:1 채팅 및 그룹 채팅 모두 작동

**프로 팁:** 30 메시지로 시작해 보고, 채팅 스타일에 맞춰 조절하세요. 빠른 채팅은 50+ 메시지, 느리고 상세한 채팅은 20 메시지가 좋을 수 있습니다.

</details>

<details>
<summary><strong>✋ "수동 제어" (선별적 기억 생성)</strong></summary>

**추천 대상:** 무엇이 기억으로 남을지 정확하게 결정하고 싶으신 분

**작동 방식:**

1. 채팅 메시지에 있는 작은 화살표 버튼(► ◄)을 찾으세요.
2. 중요한 장면의 첫 메시지에서 ►를 클릭합니다.
3. 그 장면의 마지막 메시지에서 ◄를 클릭합니다.
4. Memory Books 패널(🪄)을 열고 "Create Memory"를 클릭합니다.

**장점:**

* 기억 내용에 대한 완전한 제어권
* 특정 순간을 포착하는 데 최적
* 신중한 구간 설정이 필요한 복잡한 장면에 적합

**프로 팁:** 화살표 버튼은 채팅 로딩 후 몇 초 뒤에 나타납니다. 보이지 않는다면 잠시 기다리거나 페이지를 새로고침 하세요.

</details>

<details>
<summary><strong>⚡ "파워 유저" (슬래시 명령어)</strong></summary>

**추천 대상:** 키보드 단축키와 고급 기능을 원하시는 분

**필수 명령어:**

* `/scenememory 10-25` - 메시지 10번부터 25번까지 기억 생성
* `/creatememory` - 현재 표시된(화살표로 지정한) 장면으로 기억 생성
* `/nextmemory` - 마지막 기억 이후의 모든 내용을 요약
* `/sideprompt "Relationship Tracker"` - 커스텀 트래커 실행

**장점:**

* 번개처럼 빠른 기억 생성
* 일괄 작업 처리
* 커스텀 워크플로우와의 통합

</details>

---

## 🌈 아크(Arc) 요약

아크 요약은 수동으로 생성합니다. 사용자가 선택하지 않는 한 아무것도 요약되거나 삭제되지 않습니다.

### Q: 아크 요약이란 무엇인가요?

**A:** 아크 요약은 긴 스토리를 관리하기 쉽게 도와줍니다. 시간이 지남에 따라 많은 기억 항목(Entry)이 쌓이게 되고, 그중 일부는 이야기의 같은 부분을 묘사하기도 합니다. 아크 요약은 여러 개의 오래된 기억들을 하나의 더 짧은 요약으로 합쳐줍니다.

### Q: 아크 요약을 만들면 어떻게 되나요?

**A:** 아크 요약을 생성하면:

* 선택된 기억들이 하나의 새로운 항목으로 통합됩니다.
* 새로운 요약이 기존의 오래된 기억들을 대체합니다.
*(오래된 기억들은 삭제되는 것이 아니라 자동으로 숨김 처리될 수 있습니다)*
* 이야기는 여전히 기억되지만, 토큰 사용량은 줄어듭니다.

### Q: 왜 아크 요약을 만드나요?

**A:** 아크 요약은 다음과 같은 경우에 유용합니다:

* 기억 목록이 너무 길어졌을 때
* 오래된 기억들의 세세한 디테일이 더 이상 필요 없을 때
* 긴 채팅에서 토큰 사용량을 줄이고 싶을 때

### Q: 아크 요약은 어떻게 만드나요?

**A:** 아크 요약을 생성하려면:

1. STMB 메인 팝업 하단의 **🌈 Consolidate Memories into Arcs**를 클릭합니다.
2. 아크 유형을 선택합니다:
* **Multi-Arc (다중 아크)**
AI가 자연스러운 끊어짐을 찾아 여러 개의 아크를 생성합니다. 아크당 최소 기억 개수를 설정할 수 있습니다.
*GPT, Gemini, Sonnet 같은 고성능 모델에 적합합니다. 로컬 모델은 어려워할 수 있습니다.*
* **Single Arc (단일 아크)**
AI가 선택된 모든 기억을 하나의 아크로 합칩니다. 스토리의 일관성을 위해 이전 아크 내용도 포함됩니다.
* **Tiny (소형)**
더 빠르고 간단한 옵션으로 로컬 모델에서 더 잘 작동할 수 있지만, 결과물의 디테일이 떨어질 수 있습니다.


3. 포함할 기억들을 선택합니다.
4. **Run**을 클릭하고 아크 분석이 완료될 때까지 기다립니다.

---

## 🎨 트래커, 사이드 프롬프트 & 템플릿 (고급 기능)

**사이드 프롬프트(Side Prompts)**는 진행 중인 스토리 정보를 유지하는 데 도움을 주는 백그라운드 추적기입니다.
이들은 기억 생성과 함께 실행되며 시간이 지남에 따라 동일한 노트를 업데이트할 수 있습니다. **스토리를 지켜보며 특정 세부 사항을 최신 상태로 유지해 주는 도우미**라고 생각하세요.

### 🚀 **템플릿으로 빠른 시작**

1. Memory Books 설정을 엽니다.
2. **Side Prompts**를 클릭합니다.
3. **템플릿 라이브러리**를 둘러보고 스토리에 맞는 것을 선택하세요:
* **Character Development Tracker** – 성격 변화와 성장 추적
* **Relationship Dynamics** – 캐릭터 간의 관계 추적
* **Plot Thread Tracker** – 진행 중인 줄거리 추적
* **Mood & Atmosphere** – 감정적 톤 추적
* **World Building Notes** – 배경 설정 및 로어(Lore) 추적


4. 원하는 템플릿을 활성화합니다 (나중에 수정 가능).
5. 이제 기억 생성 시 이 추적 내용이 자동으로 포함됩니다.

### ⚙️ **사이드 프롬프트 작동 원리**

* **백그라운드 트래커**: 조용히 실행되며 시간이 지남에 따라 정보를 업데이트합니다.
* **비침해적**: 메인 AI 설정이나 캐릭터 프롬프트를 변경하지 않습니다.
* **채팅별 제어**: 채팅마다 다른 트래커를 사용할 수 있습니다.
* **템플릿 기반**: 내장 템플릿을 사용하거나 직접 만들 수 있습니다.
* **자동 또는 수동**: 일부는 자동으로 실행되며, 일부는 명령어로 실행할 수 있습니다.

### 🛠️ **사이드 프롬프트 관리**

* **Side Prompts Manager**: 트래커 생성, 편집, 복제 및 정리.
* **Enable / Disable**: 언제든지 트래커를 켜거나 끌 수 있습니다.
* **Import / Export**: 템플릿을 공유하거나 백업합니다.
* **Status View**: 현재 채팅에서 어떤 트래커가 활성화되어 있는지 확인합니다.

### 💡 **템플릿 예시**

* 사이드 프롬프트 템플릿 라이브러리 (JSON 가져오기):
[SidePromptTemplateLibrary.json](https://www.google.com/search?q=/resources/SidePromptTemplateLibrary.json)

프롬프트 아이디어 예시:

* "중요한 대화와 캐릭터 상호작용 추적"
* "현재 퀘스트 상태 최신화"
* "새로운 세계관 설정(World-building) 세부 사항이 나오면 기록"
* "캐릭터 A와 캐릭터 B 사이의 관계 추적"

### 🔧 **커스텀 사이드 프롬프트 만들기**

1. Side Prompts Manager를 엽니다.
2. **Create New**를 클릭합니다.
3. 짧고 명확한 지시사항을 작성하세요.
*(예: "각 장면의 날씨가 어떤지 항상 기록해 줘")*
4. 저장하고 활성화(Enable)합니다.
5. 이제 트래커가 시간이 지남에 따라 이 정보를 업데이트합니다.

### 💬 **프로 팁**

사이드 프롬프트는 **작고 집중적**일 때 가장 잘 작동합니다.
"모든 것을 추적해" 대신 "주인공들 사이의 로맨틱한 긴장감을 추적해"와 같이 구체적으로 설정해 보세요.

---

### 🧠 Regex 확장 프로그램을 이용한 고급 텍스트 제어

**AI에게 보내지거나 받는 텍스트를 완벽하게 제어하고 싶으신가요?** ST Memory Books는 공식 **Regex** 확장 프로그램과 매끄럽게 통합되어 사용자 지정 규칙을 통해 텍스트를 자동으로 변환할 수 있습니다.

**다중 선택 지원:** Regex 확장 프로그램에서 정규식 스크립트를 다중 선택할 수 있습니다. 활성화된 모든 스크립트는 각 단계(프롬프트 및 응답)에서 순서대로 적용되어 강력하고 유연한 변환이 가능합니다.

이 기능은 다음과 같은 사용자에게 완벽한 고급 기능입니다:

* AI 응답에서 반복되는 문구나 불필요한 부분을 자동으로 정리하고 싶은 경우.
* AI가 보기 전에 채팅 기록의 일부를 재형식화하고 싶은 경우.
* 즉석에서 용어나 캐릭터의 말투를 표준화하고 싶은 경우.

#### **작동 원리: 두 가지 간단한 훅(Hook)**

통합 기능은 Regex 확장 프로그램 편집기에서 **Placement(위치)**를 설정하여 스크립트가 실행될 시점을 제어합니다:

1. **프롬프트 수정 (보내는 텍스트 - Outgoing)**
* **사용할 위치(Placement)**: `User Input`
* **기능**: 기억 생성이나 사이드 프롬프트 생성을 위해 AI에게 전송되기 직전에 완성된 프롬프트(채팅 기록, 시스템 지침 등 포함)를 가로챕니다.
* **사용 예시**: 캐릭터의 별명을 자동으로 본명으로 교체하여 AI가 올바른 문맥을 이해하도록 하는 스크립트 생성.


2. **응답 수정 (받는 텍스트 - Incoming)**
* **사용할 위치(Placement)**: `AI Output`
* **기능**: AI의 원본 텍스트 응답이 파싱되거나 기억으로 저장되기 *전에* 가로챕니다.
* **사용 예시**: AI 모델이 요약에 *"대규모 언어 모델로서..."* 같은 반복적인 문구를 자주 포함한다면, 생성되는 모든 기억에서 이 문구를 자동으로 제거하는 스크립트 생성.



#### **빠른 시작 예시: AI 응답 정리하기**

AI 모델이 기억 생성 시 항상 `(OOC: 이 요약이 도움이 되길 바랍니다!)`라는 문구를 덧붙인다고 가정해 봅시다. 이를 자동으로 제거하는 방법은 다음과 같습니다:

1. **Regex 확장 프로그램 이동**: SillyTavern 확장 프로그램 메뉴에서 **Regex**로 이동합니다.
2. **새 스크립트 생성**: "Open Regex Editor"를 클릭하여 새 스크립트를 만듭니다.
3. **스크립트 설정**:
* **Script Name**: `Clean OOC Notes`
* **Find Regex**: `/\\(OOC:.*?\\)/g` ("(OOC: ...)" 텍스트와 그 안의 내용을 찾음).
* **Replace String**: 비워둡니다 (일치하는 텍스트 삭제).
* **Affects (Placement)**: **AI Output**을 제외한 모든 체크박스를 해제합니다. 이 단계가 가장 중요합니다!
* **스크립트 활성화**: 스크립트가 비활성화(Disabled) 상태가 아닌지 확인하세요.


4. **저장 및 완료!**

이제 ST Memory Books가 AI로부터 응답을 받을 때마다 이 스크립트가 자동으로 실행되어, 기억이 로어북에 저장되기 전에 불필요한 텍스트를 정리합니다.

---

## ⚙️ 실제로 중요한 설정들

걱정하지 마세요. 모든 것을 설정할 필요는 없습니다! 가장 큰 차이를 만드는 설정들은 다음과 같습니다:

### 🎛️ **Auto-Summary Frequency (자동 요약 빈도)**

* **20-30 메시지**: 세밀하고 느린 진행의 채팅에 적합.
* **40-60 메시지**: 빠르고 액션이 많은 대화에 적합.
* **80+ 메시지**: 매우 빠른 그룹 채팅이나 가벼운 대화용.

### 📝 **Memory Previews (기억 미리보기)**

* 저장되기 전에 기억을 검토하려면 이 기능을 **ON** 하세요.
* AI가 중요한 것을 놓쳤다면 편집, 승인 또는 재생성할 수 있습니다.
* 중요한 스토리 라인에 추천합니다.

### 🏷️ **Memory Titles (기억 제목)**

* 기억의 이름이 지정되는 방식을 커스터마이징합니다.
* AI가 생성한 제목은 `{{title}}`, 메시지 번호는 `{{scene}}`을 사용하세요.
* 예시: `"Chapter {{title}} ({{scene}})"` -> `"Chapter 위대한 탈출 (Scene 45-67)"`

### 📚 **Memory Collections (로어북)**

* **Auto mode**: 채팅의 기본 기억 컬렉션을 사용합니다 (가장 쉬움).
* **Manual mode**: 각 채팅에 대해 특정 컬렉션을 선택합니다 (정리 정돈용).
* **Auto-create**: 자동으로 새 컬렉션을 만듭니다 (새 캐릭터에 적합).

---

## 🔧 문제 해결 (작동하지 않을 때)

### "Memory Books 옵션이 보이지 않아요!"

* 확장 프로그램이 설치되어 있고 활성화되어 있는지 확인하세요.
* 채팅 입력창 옆에 마법 지팡이(🪄) 아이콘이 있는지 확인하세요.
* 페이지를 새로고침 해보세요.

### "화살표 버튼(► ◄)이 나타나지 않아요!"

* 채팅 로딩 후 3~5초 정도 기다려 주세요. 나타나는 데 시간이 걸립니다.
* 여전히 없다면 페이지를 새로고침 하세요.
* 확장 프로그램 설정에서 ST Memory Books가 켜져 있는지 확인하세요.

### "자동 요약(Auto Summary)이 작동하지 않아요!"

* 설정에서 "Auto-Summary"가 켜져 있는지 다시 확인하세요.
* 메시지 간격(Interval)에 도달했나요? 자동 요약은 충분한 새 메시지가 쌓여야 작동합니다.
* 자동 요약을 연기(Postpone)했다면, 특정 메시지 수에 도달할 때까지 대기 중일 수 있습니다.
* 자동 요약은 *마지막* 기억 이후의 새로운 메시지만 처리합니다. 예전 기억을 삭제했다면, 과거로 돌아가서 다시 처리하지는 않습니다.

### "로어북이 없다는 에러가 떠요!"

* Memory Books 설정으로 이동하세요.
* 채팅에 로어북을 연결(Automatic Mode)하거나, "Auto-create lorebook if none exists(없으면 자동 생성)" 옵션을 켜세요.

### "가끔 이유 없이 실패해요!"

* SillyTavern 프리셋에서 Max Response Length(최대 응답 길이)가 충분히 크게 설정되어 있는지 확인하세요. Aiko는 최소 2000 토큰을 권장합니다 (Aiko는 4000 사용).
* 에러 메시지가 더 자세하게 나오지만, 여전히 문제가 있다면 Github이나 Discord를 통해 Aiko에게 문의하세요.

### "커스텀 프롬프트가 제대로 작동하지 않아요!"

* 설정의 "Summary Prompt Manager"를 확인하세요.
* 프롬프트가 AI에게 **JSON 형식**으로 응답하도록 지시하고 있는지 확인하세요. (예: `{ "title": "...", "content": "..." }`)

---

## 🚫 ST Memory Books가 하지 않는 것

* **일반적인 로어북 에디터가 아닙니다:** 이 가이드는 STMB가 생성한 항목(Entry)에 초점을 맞춥니다. 일반적인 로어북 편집은 SillyTavern에 내장된 로어북 에디터를 사용하세요.

---

## 💡 도움말 및 추가 정보

* **더 자세한 정보:** [readme.md](readme.md)
* **최신 업데이트:** [changelog.md](changelog.md)
* **오래된 로어북 변환:** [lorebookconverter.html](https://www.google.com/search?q=lorebookconverter.html)
* **커뮤니티 지원:** Discord의 SillyTavern 커뮤니티에 참여하세요! (📕ST Memory Books 스레드를 찾거나 @tokyoapple에게 DM으로 도움을 요청하세요.)
* **버그/기능 제안:** 버그를 발견했거나 좋은 아이디어가 있나요? 이 저장소에 GitHub 이슈를 열어주세요.

---

### 📚 Lorebook Ordering (STLO)으로 기능 강화하기

고급 기억 정리와 더 깊은 스토리 통합을 위해, STMB를 [SillyTavern-LorebookOrdering (STLO)](https://github.com/aikohanasaki/SillyTavern-LorebookOrdering/blob/main/guides/STMB%20and%20STLO%20-%20English.md)와 함께 사용하는 것을 강력히 추천합니다. 모범 사례, 설정 방법, 팁은 가이드를 참조하세요!