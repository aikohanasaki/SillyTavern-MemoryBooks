# üìï ST Memory Books - Tu Asistente de Memoria de Chat con IA

**¬°Convierte tus interminables conversaciones de chat en memorias organizadas y buscables!**

¬øNecesitas que el bot recuerde cosas, pero el chat es demasiado largo para el contexto? ¬øQuieres hacer un seguimiento autom√°tico de los puntos importantes de la trama sin tomar notas manualmente? ST Memory Books hace exactamente eso: observa tus chats y crea res√∫menes inteligentes para que nunca m√°s pierdas el hilo de tu historia.

---

## üöÄ Inicio R√°pido (¬°5 Minutos para Tu Primera Memoria!)

**¬øNuevo en ST Memory Books?** Vamos a configurarte con tu primera memoria autom√°tica en solo unos pocos clics:

### Paso 1: Encuentra la Extensi√≥n
- Busca el icono de la varita m√°gica () junto a tu cuadro de entrada de chat
- Haz clic en √©l y luego en **"Memory Books"**
- Ver√°s el panel de control de ST Memory Books

### Paso 2: Activa la Magia Autom√°tica
- En el panel de control, busca **"Auto-Summary"**
- Act√≠valo
- Config√∫ralo para crear memorias cada **20-30 mensajes** (un buen punto de partida)
- ¬°Eso es todo! üéâ

### Paso 3: Chatea Normalmente
- Sigue chateando como de costumbre
- Despu√©s de 20-30 mensajes nuevos, ST Memory Books har√° autom√°ticamente lo siguiente:
  - Elegir los mejores l√≠mites de la escena
  - Pedirle a tu IA que escriba un resumen
  - Guardarlo en tu colecci√≥n de memorias
  - Mostrarte una notificaci√≥n cuando haya terminado

**¬°Felicidades!** Ahora tienes una gesti√≥n de memoria automatizada. ¬°No m√°s olvidos de lo que sucedi√≥ hace cap√≠tulos!

---

## üí° Qu√© Hace Realmente ST Memory Books

Piensa en ST Memory Books como tu **bibliotecario personal de IA** para las conversaciones de chat:

### ü§ñ **Res√∫menes Autom√°ticos**
*"No quiero pensar en ello, solo quiero que funcione"*
- Observa tu chat en segundo plano
- Crea memorias autom√°ticamente cada X mensajes
- Perfecto para juegos de rol largos, escritura creativa o historias en curso

### ‚úã **Creaci√≥n Manual de Memorias**
*"Quiero tener el control sobre lo que se guarda"*
- Marca escenas importantes con simples botones de flecha (‚ñ∫ ‚óÑ)
- Crea memorias bajo demanda para momentos especiales
- Ideal para capturar puntos clave de la trama o desarrollos de personajes

### üìä **Prompts Laterales y Rastreadores Inteligentes**
*"Quiero hacer un seguimiento de las relaciones, los hilos de la trama o las estad√≠sticas"*
- Fragmentos de prompt reutilizables que mejoran la generaci√≥n de memorias
- Biblioteca de plantillas incorporada con rastreadores listos para usar
- Prompts de IA personalizados que rastrean cualquier cosa que desees
- Actualiza autom√°ticamente los marcadores, el estado de las relaciones, los res√∫menes de la trama
- Ejemplos: "¬øA qui√©n le gusta qui√©n?", "Estado actual de la misi√≥n", "Rastreador de humor del personaje"

### üìö **Colecciones de Memorias**
*Donde viven todas tus memorias*
- Organizadas y buscables autom√°ticamente
- Funciona con el sistema de lorebook incorporado de SillyTavern
- Tu IA puede hacer referencia a memorias pasadas en nuevas conversaciones

---

## üéØ Elige Tu Estilo

<details>
<summary><strong>üîÑ "Configurar y Olvidar" (Recomendado para Principiantes)</strong></summary>

**Perfecto si quieres:** Automatizaci√≥n sin intervenci√≥n que simplemente funciona

**C√≥mo funciona:**
1. Activa "Auto-Summary" en los ajustes
2. Elige con qu√© frecuencia crear memorias (cada 20-50 mensajes funciona bien)
3. Sigue chateando normalmente - ¬°las memorias se crean autom√°ticamente!

**Lo que obtienes:**
- No se requiere trabajo manual
- Creaci√≥n de memorias consistente
- Nunca te pierdes los momentos importantes de la historia
- Funciona tanto en chats individuales como en grupales

**Consejo profesional:** Comienza con 30 mensajes y luego aj√∫stalo seg√∫n tu estilo de chat. Los chats r√°pidos pueden querer m√°s de 50, los chats detallados m√°s lentos pueden preferir 20.

</details>

<details>
<summary><strong>‚úã "Control Manual" (Para la Creaci√≥n Selectiva de Memorias)</strong></summary>

**Perfecto si quieres:** Decidir exactamente qu√© se convierte en una memoria

**C√≥mo funciona:**
1. Busca los peque√±os botones de flecha (‚ñ∫ ‚óÑ) en tus mensajes de chat
2. Haz clic en ‚ñ∫ en el primer mensaje de una escena importante
3. Haz clic en ‚óÑ en el √∫ltimo mensaje de esa escena
4. Abre Memory Books (ü™Ñ) y haz clic en "Crear Memoria"

**Lo que obtienes:**
- Control total sobre el contenido de la memoria
- Perfecto para capturar momentos espec√≠ficos
- Ideal para escenas complejas que necesitan l√≠mites cuidadosos

**Consejo profesional:** Los botones de flecha aparecen unos segundos despu√©s de cargar un chat. Si no los ves, espera un momento o actualiza la p√°gina.

</details>

<details>
<summary><strong>‚ö° "Usuario Avanzado" (Comandos de Barra)</strong></summary>

**Perfecto si quieres:** Atajos de teclado y funciones avanzadas

**Comandos esenciales:**
- `/scenememory 10-25` - Crear memoria de los mensajes 10 al 25
- `/creatememory` - Crear memoria de la escena marcada actualmente
- `/nextmemory` - Resumir todo desde la √∫ltima memoria
- `/sideprompt "Rastreador de Relaciones"` - Ejecutar un rastreador personalizado

**Lo que obtienes:**
- Creaci√≥n de memorias ultrarr√°pida
- Operaciones por lotes
- Integraci√≥n con flujos de trabajo personalizados

</details>

---

## üé® Prompts Laterales y Plantillas (Funci√≥n Avanzada)

Los **Prompts Laterales** son fragmentos de prompt reutilizables que mejoran la generaci√≥n de tus memorias sin cambiar tus ajustes principales de IA. Pi√©nsalos como "complementos" que le dan a tus memorias un enfoque extra o capacidades de seguimiento.

### üöÄ **Inicio R√°pido con Plantillas**
1. Abre los ajustes de Memory Books
2. Haz clic en el bot√≥n **"Side Prompts"**
3. Explora la **biblioteca de plantillas** - elige algo que se ajuste a tu historia:
   - **Rastreador de Desarrollo de Personajes** - Rastrea los cambios y el crecimiento de la personalidad
   - **Din√°micas de Relaci√≥n** - Monitorea las relaciones entre los personajes
   - **Rastreador de Hilos de Trama** - Mantiene un registro de las l√≠neas argumentales en curso
   - **Humor y Atm√≥sfera** - Captura el tono emocional de las escenas
   - **Notas de Construcci√≥n de Mundo** - Registra los detalles del entorno y el lore
4. Habilita las plantillas que quieras, personal√≠zalas si es necesario
5. ¬°Tus memorias ahora incluir√°n este seguimiento extra autom√°ticamente!

### ‚öôÔ∏è **C√≥mo Funcionan los Prompts Laterales**
- **No Intrusivos**: No cambian tus ajustes principales de IA ni los prompts de los personajes
- **Control por Chat**: Habilita diferentes prompts para diferentes chats
- **Basados en Plantillas**: Usa plantillas preconstruidas o crea las tuyas propias
- **Integraci√≥n Autom√°tica**: Una vez habilitados, mejoran cada memoria creada

### üõ†Ô∏è **Gesti√≥n de Prompts Laterales**
- **Gestor de Prompts Laterales**: Crea, edita, duplica y organiza tus prompts
- **Importar/Exportar**: Comparte plantillas de prompts con otros o haz una copia de seguridad de tu colecci√≥n
- **Activaci√≥n R√°pida**: Habilita/deshabilita prompts instant√°neamente en la ventana emergente de Prompts Laterales
- **Vista Previa en Vivo**: Ve qu√© prompts est√°n activos para el chat actual

### üí° **Ejemplos de Plantillas**
- Biblioteca de Plantillas de Prompts Laterales (importa este JSON): [SidePromptTemplateLibrary.json](/resources/SidePromptTemplateLibrary.json)
- **"Centrarse en el di√°logo y las interacciones de los personajes"**
- **"Rastrear el estado actual de la misi√≥n y los objetivos"**
- **"Anotar cualquier detalle de construcci√≥n de mundo mencionado"**
- **"Monitorear la relaci√≥n entre [Personaje A] y [Personaje B]"**

### üîß **Creaci√≥n de Prompts Laterales Personalizados**
1. Abre el Gestor de Prompts Laterales
2. Haz clic en "Crear Nuevo"
3. Escribe tu prompt (ejemplo: "Anotar siempre c√≥mo est√° el clima en cada escena")
4. Gu√°rdalo y habil√≠talo
5. ¬°Ahora todas tus memorias incluir√°n el seguimiento del clima!

**Consejo Profesional**: Los Prompts Laterales funcionan mejor cuando son espec√≠ficos y enfocados. En lugar de "rastrear todo", prueba "rastrear la tensi√≥n rom√°ntica entre los personajes principales".

---

### üß† Control de Texto Avanzado con la Extensi√≥n Regex

**¬øQuieres el m√°ximo control sobre el texto que se env√≠a y se recibe de la IA?** ST Memory Books ahora se integra a la perfecci√≥n con la extensi√≥n oficial **Regex**, permiti√©ndote transformar texto autom√°ticamente usando reglas personalizadas.

Esta es una funci√≥n avanzada perfecta para usuarios que quieren:
- Limpiar autom√°ticamente frases repetitivas o artefactos de la respuesta de una IA.
- Reformatear partes de la transcripci√≥n del chat antes de que la IA lo vea.
- Estandarizar la terminolog√≠a o los gestos de los personajes sobre la marcha.

#### **C√≥mo Funciona: Dos Ganchos Simples**

La integraci√≥n funciona aplicando tus scripts de regex habilitados en dos puntos cr√≠ticos. T√∫ controlas qu√© scripts se ejecutan configurando su **Ubicaci√≥n** en el editor de la extensi√≥n Regex:

1.  **Modificando el Prompt (Texto Saliente)**
    *   **Ubicaci√≥n a usar**: `User Input`
    *   **Qu√© hace**: Intercepta el prompt completamente ensamblado (incluyendo el historial del chat, instrucciones del sistema, etc.) justo antes de que se env√≠e a la IA para la generaci√≥n de memorias o prompts laterales.
    *   **Caso de Uso de Ejemplo**: Podr√≠as crear un script para reemplazar autom√°ticamente todas las instancias del apodo de un personaje por su nombre completo, asegurando que la IA tenga el contexto adecuado.

2.  **Modificando la Respuesta (Texto Entrante)**
    *   **Ubicaci√≥n a usar**: `AI Output`
    *   **Qu√© hace**: Intercepta la respuesta de texto cruda de la IA *antes* de que se analice o se guarde como una memoria.
    *   **Caso de Uso de Ejemplo**: Si tu modelo de IA a menudo incluye frases repetitivas como *"Como un gran modelo de lenguaje..."* en sus res√∫menes, puedes crear un script de regex para eliminar autom√°ticamente esta frase de cada memoria que genera.

#### **Ejemplo de Inicio R√°pido: Limpiando Respuestas de la IA**

Digamos que tu modelo de IA consistentemente a√±ade `(OOC: ¬°Espero que este resumen sea √∫til!)` a sus generaciones de memoria. As√≠ es como puedes eliminarlo autom√°ticamente:

1.  **Ve a la Extensi√≥n Regex**: Abre el men√∫ principal de extensiones de SillyTavern y ve a **Regex**.
2.  **Crea un Nuevo Script**: Haz clic en "Open Regex Editor" para crear un nuevo script de regex.
3.  **Configura el Script**:
    *   **Nombre del Script**: `Limpiar Notas OOC`
    *   **Find Regex**: `/\\(OOC:.*?\\)/g` (Esto encuentra el texto "(OOC: ...)" y todo lo que contiene).
    *   **Replace String**: D√©jalo en blanco para eliminar el texto coincidente.
    *   **Afecta (Ubicaci√≥n)**: Desmarca todas las casillas excepto **AI Output**. ¬°Este es el paso m√°s importante!
    *   **Habilita el Script**: Aseg√∫rate de que el script no est√© deshabilitado.
4.  **¬°Guarda y Listo!**

Ahora, cada vez que ST Memory Books obtenga una respuesta de la IA, este script se ejecutar√° autom√°ticamente, limpiando el texto no deseado antes de que la memoria se guarde en tu libro de conocimientos.

---

## ‚öôÔ∏è Ajustes que Realmente Importan

No te preocupes, ¬°no necesitas configurar todo! Aqu√≠ est√°n los ajustes que marcan la mayor diferencia:

### üéõÔ∏è **Frecuencia de Auto-Resumen**
- **20-30 mensajes**: Ideal para chats detallados y m√°s lentos
- **40-60 mensajes**: Perfecto para conversaciones m√°s r√°pidas y llenas de acci√≥n
- **M√°s de 80 mensajes**: Para chats grupales muy r√°pidos o conversaciones casuales

### üìù **Vistas Previas de Memoria**
- Activa esto para revisar las memorias antes de que se guarden
- Puedes editar, aprobar o regenerar si la IA omiti√≥ algo importante
- Recomendado para l√≠neas argumentales importantes

### üè∑Ô∏è **T√≠tulos de Memoria**
- Personaliza c√≥mo se nombran tus memorias
- Usa `{{title}}` para t√≠tulos generados por la IA, `{{scene}}` para los n√∫meros de mensaje
- Ejemplo: `"Cap√≠tulo {{title}} ({{scene}})"` se convierte en `"Cap√≠tulo La Gran Escapada (Escena 45-67)"`

### üìö **Colecciones de Memorias** (Lorebooks)
- **Modo autom√°tico**: Usa la colecci√≥n de memoria predeterminada de tu chat (el m√°s f√°cil)
- **Modo manual**: Elige una colecci√≥n espec√≠fica para cada chat (para organizaci√≥n)
- **Creaci√≥n autom√°tica**: Crea nuevas colecciones autom√°ticamente (bueno para nuevos personajes)

---

## üîß Soluci√≥n de Problemas (Cuando las Cosas No Funcionan)

### "¬°No veo la opci√≥n de Memory Books!"
- Verifica que la extensi√≥n est√© instalada y habilitada
- Busca el icono de la varita m√°gica () junto a tu entrada de chat
- Intenta refrescar la p√°gina

### "¬°Los botones de flecha (‚ñ∫ ‚óÑ) no aparecen!"
- Espera 3-5 segundos despu√©s de cargar un chat, necesitan tiempo para aparecer
- Si a√∫n faltan, refresca la p√°gina
- Aseg√∫rate de que ST Memory Books est√© habilitado en las extensiones

### "¬°El Resumen Autom√°tico no funciona!"
- Verifica dos veces que "Auto-Summary" est√© habilitado en los ajustes de Memory Books
- ¬øSe ha alcanzado el intervalo de mensajes? El resumen autom√°tico espera a que haya suficientes mensajes nuevos
- Si pospusiste el resumen autom√°tico, podr√≠a estar esperando hasta un cierto n√∫mero de mensajes
- El resumen autom√°tico solo procesa los mensajes nuevos desde la *√∫ltima* memoria. Si eliminaste memorias antiguas, no retrocede.

### "¬°Recibo errores sobre lorebooks faltantes!"
- Ve a los ajustes de Memory Books
- O vincula un lorebook a tu chat (Modo Autom√°tico) o habilita "Crear autom√°ticamente un lorebook si no existe"

### "¬°A veces falla sin raz√≥n aparente!"
- Aseg√∫rate de que tu Longitud M√°xima de Respuesta (en los preajustes de SillyTavern) est√© configurada en un n√∫mero suficientemente grande. Aiko recomienda al menos 2000 tokens (Aiko usa 4000).
- Los mensajes de error son m√°s detallados ahora, pero si sigues teniendo problemas, por favor contacta a Aiko en Github o Discord.

### "¬°Mis prompts personalizados no funcionan bien!"
- Revisa el "Gestor de Prompts de Resumen" en los ajustes de Memory Books
- Aseg√∫rate de que tu prompt instruya a la IA para que responda en **formato JSON** (p. ej., `{ "title": "...", "content": "..." }`)

---

## üö´ Lo que ST Memory Books No Hace

- **No es un editor de lorebook general:** Esta gu√≠a se centra en las entradas creadas por STMB. Para la edici√≥n general de lorebooks, usa el editor de lorebook incorporado de SillyTavern.

---

## üí° Obtener Ayuda y M√°s Informaci√≥n

- **Informaci√≥n m√°s detallada:** [readme.md](readme.md)
- **√öltimas actualizaciones:** [changelog.md](changelog.md)
- **Convertir lorebooks antiguos:** [lorebookconverter.html](lorebookconverter.html)
- **Soporte de la comunidad:** ¬°√önete a la comunidad de SillyTavern en Discord! (Busca el hilo de üìïST Memory Books o env√≠a un mensaje directo a @tokyoapple para obtener ayuda directa).
- **Errores/caracter√≠sticas:** ¬øEncontraste un error o tienes una gran idea? Abre un issue en GitHub en este repositorio.
