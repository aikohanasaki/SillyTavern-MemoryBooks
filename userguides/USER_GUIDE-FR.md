# üìï ST Memory Books - Votre Assistant M√©moire IA pour le Chat

**Transformez vos conversations interminables en souvenirs organis√©s et consultables !**

Vous avez besoin que le bot se souvienne de certaines choses, mais la discussion est trop longue pour le contexte ? Vous voulez suivre automatiquement les points importants de l'intrigue sans prendre de notes manuellement ? ST Memory Books fait exactement cela : il surveille vos discussions et cr√©e des r√©sum√©s intelligents pour que vous ne perdiez plus jamais le fil de votre histoire.

(Vous cherchez des d√©tails techniques sur les coulisses ? Peut-√™tre pr√©f√©rez-vous [Comment fonctionne STMB](userguides\howSTMBworks-en.md).)

---

## üöÄ D√©marrage Rapide (Votre premier souvenir en 5 minutes !)

**Nouveau sur ST Memory Books ?** Configurons votre premi√®re m√©moire automatique en quelques clics :

### √âtape 1 : Trouvez l'extension
- Cherchez l'ic√¥ne de baguette magique (ü™Ñ) √† c√¥t√© de votre zone de saisie de chat.
- Cliquez dessus, puis cliquez sur **"Memory Books"**.
- Vous verrez le panneau de contr√¥le de ST Memory Books.

### √âtape 2 : Activez la "Magie Automatique"
- Dans le panneau de contr√¥le, trouvez **"Auto-Summary"** (R√©sum√© Automatique).
- Mettez-le sur **ON**.
- R√©glez-le pour cr√©er des souvenirs tous les **20-30 messages** (un bon point de d√©part).
- C'est tout ! üéâ

### √âtape 3 : Discutez normalement
- Continuez √† discuter comme d'habitude.
- Apr√®s 20-30 nouveaux messages, ST Memory Books va automatiquement :
  - Choisir les meilleures limites de sc√®ne.
  - Demander √† votre IA d'√©crire un r√©sum√©.
  - L'enregistrer dans votre collection de souvenirs.
  - Vous afficher une notification une fois termin√©.

**F√©licitations !** Vous disposez maintenant d'une gestion automatis√©e de la m√©moire. Plus besoin d'oublier ce qui s'est pass√© il y a plusieurs chapitres !

---

## üí° Ce que fait r√©ellement ST Memory Books

Consid√©rez ST Memory Books comme votre **biblioth√©caire IA personnel** pour les conversations de chat :

### ü§ñ **R√©sum√©s Automatiques**
*"Je ne veux pas y penser, je veux juste que √ßa marche"*
- Surveille votre chat en arri√®re-plan.
- Cr√©e automatiquement des souvenirs tous les X messages.
- Parfait pour les longs roleplays, l'√©criture cr√©ative ou les histoires en cours.

### ‚úã **Cr√©ation Manuelle de Souvenirs**
*"Je veux avoir le contr√¥le sur ce qui est sauvegard√©"*
- Marquez les sc√®nes importantes avec de simples boutons fl√©ch√©s (‚ñ∫ ‚óÑ).
- Cr√©ez des souvenirs √† la demande pour les moments sp√©ciaux.
- Id√©al pour capturer les points cl√©s de l'intrigue ou l'√©volution des personnages.

### üìä **Prompts Secondaires & Suivi Intelligent**
*"Je veux suivre les relations, les fils de l'intrigue ou les statistiques"*
- Des fragments de prompt r√©utilisables qui am√©liorent la g√©n√©ration de m√©moire.
- Biblioth√®que de mod√®les avec des traceurs pr√™ts √† l'emploi.
- Prompts IA personnalis√©s qui suivent tout ce que vous voulez.
- Mise √† jour automatique des tableaux de scores, des statuts relationnels, des r√©sum√©s d'intrigue.
- Exemples : "Qui aime qui ?", "Statut actuel de la qu√™te", "Suivi de l'humeur du personnage".

### üìö **Collections de Souvenirs (Lorebooks)**
*L'endroit o√π vivent tous vos souvenirs*
- Organis√©s et consultables automatiquement.
- Fonctionne avec le syst√®me de Lorebook int√©gr√© de SillyTavern.
- Votre IA peut faire r√©f√©rence aux souvenirs pass√©s dans de nouvelles conversations.

---

## üéØ Choisissez votre style

<details>
<summary><strong>üîÑ "R√©gler et Oublier" (Recommand√© pour les d√©butants)</strong></summary>

**Parfait si vous voulez :** Une automatisation sans intervention qui fonctionne tout simplement.

**Comment √ßa marche :**
1. Activez "Auto-Summary" dans les param√®tres.
2. Choisissez la fr√©quence de cr√©ation des souvenirs (tous les 20-50 messages fonctionne bien).
3. Continuez √† discuter normalement - les souvenirs se cr√©ent automatiquement !

**Ce que vous obtenez :**
- Aucun travail manuel requis.
- Cr√©ation de m√©moire coh√©rente.
- Ne manquez jamais les moments importants de l'histoire.
- Fonctionne aussi bien dans les chats solo que de groupe.

**Conseil pro :** Commencez avec 30 messages, puis ajustez en fonction de votre style de chat. Les chats rapides peuvent n√©cessiter 50+, les chats lents et d√©taill√©s peuvent pr√©f√©rer 20.

</details>

<details>
<summary><strong>‚úã "Contr√¥le Manuel" (Pour une cr√©ation de m√©moire s√©lective)</strong></summary>

**Parfait si vous voulez :** D√©cider exactement ce qui devient un souvenir.

**Comment √ßa marche :**
1. Cherchez les petits boutons fl√©ch√©s (‚ñ∫ ‚óÑ) sur vos messages de chat.
2. Cliquez sur ‚ñ∫ sur le premier message d'une sc√®ne importante.
3. Cliquez sur ‚óÑ sur le dernier message de cette sc√®ne.
4. Ouvrez Memory Books (ü™Ñ) et cliquez sur "Create Memory" (Cr√©er un souvenir).

**Ce que vous obtenez :**
- Contr√¥le total sur le contenu de la m√©moire.
- Parfait pour capturer des moments sp√©cifiques.
- Id√©al pour les sc√®nes complexes qui n√©cessitent des limites pr√©cises.

**Conseil pro :** Les boutons fl√©ch√©s apparaissent quelques secondes apr√®s le chargement d'un chat. Si vous ne les voyez pas, attendez un instant ou actualisez la page.

</details>

<details>
<summary><strong>‚ö° "Utilisateur Expert" (Commandes Slash)</strong></summary>

**Parfait si vous voulez :** Des raccourcis clavier et des fonctionnalit√©s avanc√©es.

**Commandes essentielles :**
- `/scenememory 10-25` - Cr√©er un souvenir √† partir des messages 10 √† 25.
- `/creatememory` - Cr√©er un souvenir √† partir de la sc√®ne actuellement marqu√©e.
- `/nextmemory` - R√©sumer tout ce qui s'est pass√© depuis le dernier souvenir.
- `/sideprompt "Relationship Tracker"` - Lancer un traceur personnalis√©.

**Ce que vous obtenez :**
- Cr√©ation de m√©moire ultra-rapide.
- Op√©rations par lots.
- Int√©gration avec des flux de travail personnalis√©s.

</details>

---

## üåà R√©sum√©s d'Arc (Arc Summaries)

Les R√©sum√©s d'Arc sont cr√©√©s manuellement. Rien n'est r√©sum√© ou supprim√© √† moins que vous ne choisissiez de le faire.

### Q : Que sont les R√©sum√©s d'Arc ?

**R :** Les R√©sum√©s d'Arc aident √† garder les longues histoires g√©rables. Avec le temps, vous pouvez accumuler de nombreuses entr√©es de m√©moire. Certaines d'entre elles d√©crivent la m√™me partie de l'histoire.
Un R√©sum√© d'Arc vous permet de combiner plusieurs anciens souvenirs en un seul r√©sum√© plus court.

### Q : Que se passe-t-il lorsque je fais un R√©sum√© d'Arc ?

**R :** Lorsque vous cr√©ez un R√©sum√© d'Arc :

* Les souvenirs s√©lectionn√©s sont combin√©s en une nouvelle entr√©e.
* Le nouveau r√©sum√© remplace ces anciens souvenirs.
  *(les anciens souvenirs peuvent √™tre masqu√©s automatiquement ‚Äî pas supprim√©s)*
* L'histoire est toujours m√©moris√©e, mais avec moins de tokens.

### Q : Pourquoi faire des R√©sum√©s d'Arc ?

**R :** Les R√©sum√©s d'Arc sont utiles lorsque :

* Votre liste de souvenirs devient tr√®s longue.
* Les anciens souvenirs ne sont plus n√©cessaires dans tous leurs d√©tails.
* Vous voulez r√©duire l'utilisation de tokens dans les longs chats.

### Q : Comment faire un R√©sum√© d'Arc ?

**R :** Pour cr√©er un R√©sum√© d'Arc :

1. Cliquez sur **üåà Consolidate Memories into Arcs** au bas de la fen√™tre contextuelle principale de STMB.
2. Choisissez un type d'arc :

   * **Multi-Arc**
     L'IA recherche les pauses naturelles et cr√©e plusieurs arcs.
     Vous pouvez d√©finir un nombre minimum de souvenirs par arc.
     *Fonctionne mieux avec des mod√®les puissants (GPT, Gemini, Sonnet). Les mod√®les locaux peuvent avoir du mal.*
   * **Single Arc (Arc Unique)**
     L'IA combine tous les souvenirs s√©lectionn√©s en un seul arc.
     Les arcs pr√©c√©dents sont inclus pour aider √† garder l'histoire coh√©rente.
   * **Tiny (Minuscule)**
     Une option plus rapide et plus simple qui peut mieux fonctionner avec les mod√®les locaux, mais les r√©sultats peuvent √™tre moins d√©taill√©s.
3. S√©lectionnez les souvenirs que vous souhaitez inclure.
4. Cliquez sur **Run** et attendez que l'analyse de l'arc soit termin√©e.

---

## üé® Traceurs, Prompts Secondaires & Mod√®les (Fonctionnalit√© Avanc√©e)

Les **Side Prompts** (Prompts Secondaires) sont des traceurs d'arri√®re-plan qui aident √† maintenir les informations de l'histoire en cours.
Ils s'ex√©cutent parall√®lement √† la cr√©ation de m√©moire et peuvent mettre √† jour les m√™mes notes au fil du temps. Consid√©rez-les comme des **assistants qui surveillent votre histoire et maintiennent certains d√©tails √† jour**.

### üöÄ **D√©marrage Rapide avec les Mod√®les**

1. Ouvrez les param√®tres de Memory Books.
2. Cliquez sur **Side Prompts**.
3. Parcourez la **biblioth√®que de mod√®les** (template library) et choisissez ce qui convient √† votre histoire :

   * **Character Development Tracker** ‚Äì Suit les changements de personnalit√© et la croissance.
   * **Relationship Dynamics** ‚Äì Suit les relations entre les personnages.
   * **Plot Thread Tracker** ‚Äì Suit les intrigues en cours.
   * **Mood & Atmosphere** ‚Äì Suit le ton √©motionnel.
   * **World Building Notes** ‚Äì Suit les d√©tails du cadre et le lore.
4. Activez les mod√®les que vous souhaitez (vous pouvez les personnaliser plus tard).
5. Vos souvenirs incluront d√©sormais ce suivi automatiquement.

### ‚öôÔ∏è **Comment fonctionnent les Prompts Secondaires**

* **Traceurs d'arri√®re-plan** : Ils s'ex√©cutent discr√®tement et mettent √† jour les informations au fil du temps.
* **Non-intrusifs** : Ils ne modifient pas vos param√®tres principaux d'IA ou les prompts de personnage.
* **Contr√¥le par chat** : Diff√©rents chats peuvent utiliser diff√©rents traceurs.
* **Bas√© sur des mod√®les** : Utilisez des mod√®les int√©gr√©s ou cr√©ez les v√¥tres.
* **Automatique ou Manuel** : Certains s'ex√©cutent automatiquement, d'autres peuvent √™tre lanc√©s par commande.

Cela rend le comportement de d√©clenchement compr√©hensible sans termes techniques.

### üõ†Ô∏è **G√©rer les Prompts Secondaires**

* **Side Prompts Manager** : Cr√©ez, modifiez, dupliquez et organisez les traceurs.
* **Enable / Disable** : Activez ou d√©sactivez les traceurs √† tout moment.
* **Import / Export** : Partagez des mod√®les ou sauvegardez-les.
* **Status View** : Voyez quels traceurs sont actifs dans le chat actuel.

La "Status View" (Vue d'√©tat) est plus claire que "Live Preview" pour les lecteurs non anglophones.

### üí° **Exemples de Mod√®les**

* Biblioth√®que de mod√®les de Side Prompts (importez ce JSON) :
  [SidePromptTemplateLibrary.json](/resources/SidePromptTemplateLibrary.json)

Exemples d'id√©es de prompts :

* "Suivre les dialogues importants et les interactions entre les personnages"
* "Tenir √† jour le statut actuel de la qu√™te"
* "Noter les nouveaux d√©tails de construction du monde (world-building) lorsqu'ils apparaissent"
* "Suivre la relation entre le Personnage A et le Personnage B"

### üîß **Cr√©er des Prompts Secondaires Personnalis√©s**

1. Ouvrez le **Side Prompts Manager**.
2. Cliquez sur **Create New**.
3. √âcrivez une instruction courte et claire.
   *(exemple : "Toujours noter quel temps il fait dans chaque sc√®ne")*
4. Sauvegardez et activez-le.
5. Le traceur mettra d√©sormais √† jour cette information au fil du temps.

### üí¨ **Conseil Pro**

Les Prompts Secondaires fonctionnent mieux lorsqu'ils sont **petits et cibl√©s**.
Au lieu de "tout suivre", essayez "suivre la tension romantique entre les personnages principaux".

---

### üß† Contr√¥le Avanc√© du Texte avec l'Extension Regex

**Vous voulez un contr√¥le ultime sur le texte envoy√© et re√ßu de l'IA ?** ST Memory Books s'int√®gre d√©sormais parfaitement avec l'extension officielle **Regex**, vous permettant de transformer automatiquement le texte √† l'aide de r√®gles personnalis√©es.

**Support de la Multi-S√©lection :** Vous pouvez maintenant s√©lectionner plusieurs scripts regex dans l'extension Regex. Tous les scripts activ√©s seront appliqu√©s dans l'ordre √† chaque √©tape (Prompt et R√©ponse), permettant des transformations puissantes et flexibles.

C'est une fonctionnalit√© avanc√©e parfaite pour les utilisateurs qui veulent :
- Nettoyer automatiquement les phrases r√©p√©titives ou les artefacts de la r√©ponse d'une IA.
- Reformater des parties de la transcription du chat avant que l'IA ne la voie.
- Standardiser la terminologie ou les manies des personnages √† la vol√©e.

#### **Comment √ßa marche : Deux points d'ancrage (Hooks) simples**

L'int√©gration fonctionne en appliquant vos scripts regex activ√©s √† deux points critiques. Vous contr√¥lez quels scripts s'ex√©cutent en d√©finissant leur **Placement** dans l'√©diteur de l'extension Regex :

1.  **Modification du Prompt (Texte Sortant)**
    * **Placement √† utiliser** : `User Input`
    * **Ce que √ßa fait** : Intercepte le prompt enti√®rement assembl√© (y compris l'historique du chat, les instructions syst√®me, etc.) juste avant qu'il ne soit envoy√© √† l'IA pour la m√©moire ou la g√©n√©ration de prompt secondaire.
    * **Exemple d'utilisation** : Vous pourriez cr√©er un script pour remplacer automatiquement toutes les instances du surnom d'un personnage par son nom complet, assurant que l'IA a le bon contexte.

2.  **Modification de la R√©ponse (Texte Entrant)**
    * **Placement √† utiliser** : `AI Output`
    * **Ce que √ßa fait** : Intercepte la r√©ponse brute de l'IA *avant* qu'elle ne soit analys√©e ou enregistr√©e comme souvenir.
    * **Exemple d'utilisation** : Si votre mod√®le d'IA inclut souvent des phrases r√©p√©titives comme *"En tant que grand mod√®le de langage..."* dans ses r√©sum√©s, vous pouvez cr√©er un script regex pour supprimer automatiquement cette phrase de chaque souvenir g√©n√©r√©.

#### **Exemple de d√©marrage rapide : Nettoyer les r√©ponses de l'IA**

Disons que votre mod√®le d'IA ajoute constamment `(OOC : J'esp√®re que ce r√©sum√© est utile !)` √† ses g√©n√©rations de m√©moire. Voici comment le supprimer automatiquement :

1.  **Allez dans l'extension Regex** : Ouvrez le menu principal des extensions de SillyTavern et allez dans **Regex**.
2.  **Cr√©ez un nouveau Script** : Cliquez sur "Open Regex Editor" pour cr√©er un nouveau script regex.
3.  **Configurez le Script** :
    * **Script Name** : `Clean OOC Notes`
    * **Find Regex** : `/\\(OOC:.*?\\)/g` (Ceci trouve le texte "(OOC: ...)" et tout ce qu'il contient).
    * **Replace String** : Laissez vide pour supprimer le texte correspondant.
    * **Affects (Placement)** : D√©cochez toutes les cases sauf **AI Output**. C'est l'√©tape la plus importante !
    * **Activez le Script** : Assurez-vous que le script n'est pas d√©sactiv√©.
4.  **Sauvegardez et c'est fini !**

Maintenant, chaque fois que ST Memory Books re√ßoit une r√©ponse de l'IA, ce script s'ex√©cutera automatiquement, nettoyant le texte ind√©sirable avant que le souvenir ne soit enregistr√© dans votre Lorebook.

---

## ‚öôÔ∏è Les param√®tres qui comptent vraiment

Ne vous inqui√©tez pas, vous n'avez pas besoin de tout configurer ! Voici les param√®tres qui font la plus grande diff√©rence :

### üéõÔ∏è **Fr√©quence du R√©sum√© Automatique (Auto-Summary)**
- **20-30 messages** : Id√©al pour les chats d√©taill√©s et plus lents.
- **40-60 messages** : Parfait pour les conversations plus rapides et pleines d'action.
- **80+ messages** : Pour les chats de groupe tr√®s rapides ou les conversations d√©contract√©es.

### üìù **Aper√ßus de M√©moire (Memory Previews)**
- Activez ceci (ON) pour examiner les souvenirs avant qu'ils ne soient enregistr√©s.
- Vous pouvez modifier, approuver ou r√©g√©n√©rer si l'IA a manqu√© quelque chose d'important.
- Recommand√© pour les intrigues importantes.

### üè∑Ô∏è **Titres de M√©moire**
- Personnalisez la fa√ßon dont vos souvenirs sont nomm√©s.
- Utilisez `{{title}}` pour les titres g√©n√©r√©s par l'IA, `{{scene}}` pour les num√©ros de message.
- Exemple : `"Chapitre {{title}} ({{scene}})"` devient `"Chapitre La Grande √âvasion (Sc√®ne 45-67)"`.

### üìö **Collections de M√©moire** (Lorebooks)
- **Mode Auto** : Utilise la collection de m√©moire par d√©faut de votre chat (le plus simple).
- **Mode Manuel** : Choisissez une collection sp√©cifique pour chaque chat (pour l'organisation).
- **Auto-create** : Cr√©e automatiquement de nouvelles collections (bon pour les nouveaux personnages).

---

## üîß D√©pannage (Quand √ßa ne marche pas)

### "Je ne vois pas l'option Memory Books !"
- V√©rifiez que l'extension est install√©e et activ√©e.
- Cherchez l'ic√¥ne de la baguette magique (ü™Ñ) √† c√¥t√© de votre saisie de chat.
- Essayez d'actualiser la page.

### "Les boutons fl√©ch√©s (‚ñ∫ ‚óÑ) n'apparaissent pas !"
- Attendez 3-5 secondes apr√®s le chargement d'un chat - ils ont besoin de temps pour appara√Ætre.
- S'ils sont toujours manquants, actualisez la page.
- Assurez-vous que ST Memory Books est activ√© dans les extensions.

### "Le R√©sum√© Automatique ne fonctionne pas !"
- V√©rifiez que "Auto-Summary" est activ√© dans les param√®tres de Memory Books.
- L'intervalle de messages a-t-il √©t√© atteint ? Le r√©sum√© automatique attend suffisamment de nouveaux messages.
- Si vous avez report√© le r√©sum√© automatique, il peut attendre un certain nombre de messages.
- Le r√©sum√© automatique ne traite que les nouveaux messages depuis la *derni√®re* m√©moire. Si vous avez supprim√© d'anciens souvenirs, il ne revient pas en arri√®re.

### "J'ai des erreurs concernant des Lorebooks manquants !"
- Allez dans les param√®tres de Memory Books.
- Liez un lorebook √† votre chat (Mode Automatique) ou activez "Auto-create lorebook if none exists" (Cr√©er automatiquement un lorebook s'il n'en existe pas).

### "Parfois √ßa √©choue sans raison !"
- Assurez-vous que votre longueur de r√©ponse maximale (Max Response Length) dans les pr√©r√©glages SillyTavern est r√©gl√©e sur un nombre assez grand. Aiko recommande au moins 2000 tokens (Aiko en utilise 4000).
- Les messages d'erreur sont maintenant plus d√©taill√©s, mais si vous rencontrez toujours des probl√®mes, veuillez contacter Aiko sur Github ou Discord.

### "Mes prompts personnalis√©s ne fonctionnent pas bien !"
- V√©rifiez le "Summary Prompt Manager" dans les param√®tres de Memory Books.
- Assurez-vous que votre prompt demande √† l'IA de r√©pondre au **format JSON** (par exemple, `{ "title": "...", "content": "..." }`).

---

## üö´ Ce que ST Memory Books ne fait pas

- **Ce n'est pas un √©diteur g√©n√©ral de Lorebook :** Ce guide se concentre sur les entr√©es cr√©√©es par STMB. Pour l'√©dition g√©n√©rale de Lorebook, utilisez l'√©diteur de Lorebook int√©gr√© √† SillyTavern.

---

## üí° Obtenir de l'aide et plus d'infos

- **Infos plus d√©taill√©es :** [readme.md](readme.md)
- **Derni√®res mises √† jour :** [changelog.md](changelog.md)
- **Convertir d'anciens lorebooks :** [lorebookconverter.html](lorebookconverter.html)
- **Support communautaire :** Rejoignez la communaut√© SillyTavern sur Discord ! (Cherchez le fil üìïST Memory Books ou envoyez un MP √† @tokyoapple pour une aide directe).
- **Bugs/Fonctionnalit√©s :** Vous avez trouv√© un bug ou avez une id√©e g√©niale ? Ouvrez un ticket GitHub dans ce d√©p√¥t.

---

### üìö Boostez vos possibilit√©s avec Lorebook Ordering (STLO)

Pour une organisation avanc√©e de la m√©moire et une int√©gration plus profonde de l'histoire, nous recommandons fortement d'utiliser STMB avec [SillyTavern-LorebookOrdering (STLO)](https://github.com/aikohanasaki/SillyTavern-LorebookOrdering/blob/main/guides/STMB%20and%20STLO%20-%20English.md). Consultez le guide pour les meilleures pratiques, les instructions d'installation et des astuces !