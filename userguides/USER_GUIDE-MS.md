# 📕 Buku Memori ST - Pembantu Memori Sembang AI Anda

**Tukar perbualan sembang anda yang tidak berkesudahan kepada memori yang teratur dan boleh dicari!**

Perlukan bot untuk mengingati sesuatu, tetapi sembang terlalu panjang untuk konteks? Ingin menjejaki titik plot penting secara automatik tanpa mengambil nota secara manual? Buku Memori ST melakukan perkara itu - ia memerhatikan sembang anda dan mencipta ringkasan pintar supaya anda tidak akan kehilangan jejak cerita anda lagi.

---

## 🚀 Mula Pantas (5 Minit untuk Memori Pertama Anda!)

**Baru menggunakan Buku Memori ST?** Mari kita sediakan anda dengan memori automatik pertama anda dalam beberapa klik sahaja:

### Langkah 1: Cari Sambungan
- Cari ikon tongkat sihir (🪄) di sebelah kotak input sembang anda
- Klik ia, kemudian klik **"Buku Memori"**
- Anda akan melihat panel kawalan Buku Memori ST

### Langkah 2: Hidupkan Auto-Magic
- Dalam panel kawalan, cari **"Ringkasan Auto"**
- HIDUPKAN
- Tetapkannya untuk mencipta memori setiap **20-30 mesej** (titik permulaan yang baik)
- Itu sahaja! 🎉

### Langkah 3: Berbual Seperti Biasa
- Teruskan berbual seperti biasa
- Selepas 20-30 mesej baharu, Buku Memori ST akan secara automatik:
  - Pilih sempadan babak yang terbaik
  - Minta AI anda menulis ringkasan
  - Simpannya ke koleksi memori anda
  - Tunjukkan pemberitahuan apabila selesai

**Tahniah!** Anda kini mempunyai pengurusan memori automatik. Tiada lagi lupa apa yang berlaku beberapa bab yang lalu!

---

## 💡 Apa yang Sebenarnya Dilakukan oleh Buku Memori ST

Anggap Buku Memori ST sebagai **pustakawan AI peribadi** anda untuk perbualan sembang:

### 🤖 **Ringkasan Automatik**
*"Saya tidak mahu memikirkannya, cuma buat ia berfungsi"*
- Memerhatikan sembang anda di latar belakang
- Mencipta memori secara automatik setiap X mesej
- Sesuai untuk main peranan yang panjang, penulisan kreatif atau cerita yang berterusan

### ✋ **Penciptaan Memori Manual**
*"Saya mahu mengawal apa yang disimpan"*
- Tandakan babak penting dengan butang anak panah mudah (► ◄)
- Cipta memori atas permintaan untuk detik-detik istimewa
- Hebat untuk menangkap titik plot penting atau perkembangan watak

### 📊 **Gesaan Sampingan & Penjejak Pintar**
*"Saya mahu menjejaki perhubungan, urutan plot atau statistik"*
- Petikan gesaan boleh guna semula yang meningkatkan penjanaan memori
- Perpustakaan templat dengan penjejak sedia untuk digunakan
- Gesaan AI tersuai yang menjejaki apa sahaja yang anda mahu
- Kemas kini papan skor, status perhubungan, ringkasan plot secara automatik
- Contoh: "Siapa suka siapa?", "Status pencarian semasa", "Penjejak mood watak"

### 📚 **Koleksi Memori**
*Tempat semua memori anda tinggal*
- Teratur dan boleh dicari secara automatik
- Berfungsi dengan sistem buku legenda terbina dalam SillyTavern
- AI anda boleh merujuk memori lalu dalam perbualan baharu

---

## 🎯 Pilih Gaya Anda

<details>
<summary><strong>🔄 "Tetapkan dan Lupakan" (Disyorkan untuk Pemula)</strong></summary>

**Sesuai jika anda mahu:** Automasi bebas tangan yang hanya berfungsi

**Cara ia berfungsi:**
1. Hidupkan "Ringkasan Auto" dalam tetapan
2. Pilih kekerapan untuk mencipta memori (setiap 20-50 mesej berfungsi dengan baik)
3. Teruskan berbual seperti biasa - memori berlaku secara automatik!

**Apa yang anda dapat:**
- Tiada kerja manual diperlukan
- Penciptaan memori yang konsisten
- Jangan sekali-kali terlepas rentak cerita yang penting
- Berfungsi dalam sembang tunggal dan kumpulan

**Petua pro:** Mulakan dengan 30 mesej, kemudian laraskan berdasarkan gaya sembang anda. Sembang pantas mungkin mahu 50+, sembang terperinci yang lebih perlahan mungkin lebih suka 20.

</details>

<details>
<summary><strong>✋ "Kawalan Manual" (Untuk Membuat Memori Terpilih)</strong></summary>

**Sesuai jika anda mahu:** Untuk memutuskan dengan tepat apa yang menjadi memori

**Cara ia berfungsi:**
1. Cari butang anak panah kecil (► ◄) pada mesej sembang anda
2. Klik ► pada mesej pertama babak penting
3. Klik ◄ pada mesej terakhir babak itu
4. Buka Buku Memori (🪄) dan klik "Cipta Memori"

**Apa yang anda dapat:**
- Kawalan penuh ke atas kandungan memori
- Sesuai untuk menangkap detik-detik tertentu
- Hebat untuk babak kompleks yang memerlukan sempadan yang teliti

**Petua pro:** Butang anak panah muncul beberapa saat selepas memuatkan sembang. Jika anda tidak melihatnya, tunggu sebentar atau segarkan semula halaman.

</details>

<details>
<summary><strong>⚡ "Pengguna Berkuasa" (Perintah Slash)</strong></summary>

**Sesuai jika anda mahu:** Pintasan papan kekunci dan ciri lanjutan

**Perintah penting:**
- `/scenememory 10-25` - Cipta memori dari mesej 10 hingga 25
- `/creatememory` - Buat memori dari babak yang ditandakan pada masa ini
- `/nextmemory` - Ringkaskan semua sejak memori terakhir
- `/sideprompt "Penjejak Perhubungan"` - Jalankan penjejak tersuai

**Apa yang anda dapat:**
- Penciptaan memori sepantas kilat
- Operasi kelompok
- Penyepaduan dengan aliran kerja tersuai

</details>

---

## 🎨 Gesaan Sampingan & Templat (Ciri Lanjutan)

**Gesaan Sampingan** ialah petikan gesaan boleh guna semula yang meningkatkan penjanaan memori anda tanpa mengubah tetapan AI utama anda. Anggap ia sebagai "tambahan" yang memberikan memori anda fokus tambahan atau keupayaan penjejakan.

### 🚀 **Mula Pantas dengan Templat**
1. Buka tetapan Buku Memori
2. Klik butang **"Gesaan Sampingan"**
3. Semak imbas **perpustakaan templat** - pilih sesuatu yang sesuai dengan cerita anda:
   - **Penjejak Pembangunan Watak** - Menjejaki perubahan personaliti dan pertumbuhan
   - **Dinamik Perhubungan** - Memantau perhubungan antara watak
   - **Penjejak Urutan Plot** - Menjejaki jalan cerita yang sedang berjalan
   - **Mood & Suasana** - Menangkap nada emosi babak
   - **Nota Pembinaan Dunia** - Merekod butiran latar dan legenda
4. Dayakan templat yang anda mahu, sesuaikan jika perlu
5. Memori anda kini akan menyertakan penjejakan tambahan ini secara automatik!

### ⚙️ **Cara Gesaan Sampingan Berfungsi**
- **Tidak Mengganggu**: Ia tidak mengubah tetapan AI utama atau gesaan watak anda
- **Kawalan Setiap Sembang**: Dayakan gesaan yang berbeza untuk sembang yang berbeza
- **Berasaskan Templat**: Gunakan templat pra-bina atau cipta yang tersuai
- **Penyepaduan Automatik**: Sebaik sahaja didayakan, ia meningkatkan setiap memori yang dicipta

### 🛠️ **Mengurus Gesaan Sampingan**
- **Pengurus Gesaan Sampingan**: Cipta, edit, duplikasi dan susun gesaan anda
- **Import/Eksport**: Kongsi templat gesaan dengan orang lain atau sandarkan koleksi anda
- **Togol Pantas**: Dayakan/lumpuhkan gesaan serta-merta dalam tetingkap timbul Gesaan Sampingan
- **Pratonton Langsung**: Lihat gesaan mana yang aktif untuk sembang semasa

### 💡 **Contoh Templat**
- Perpustakaan Templat Gesaan Sampingan (import JSON ini): [SidePromptTemplateLibrary.json](../resources/SidePromptTemplateLibrary.json)
- **"Fokus pada dialog dan interaksi watak"**
- **"Jejaki status dan objektif pencarian semasa"**
- **"Catat sebarang butiran pembinaan dunia yang disebut"**
- **"Pantau perhubungan antara [Watak A] dan [Watak B]"**

### 🔧 **Mencipta Gesaan Sampingan Tersuai**
1. Buka Pengurus Gesaan Sampingan
2. Klik "Cipta Baharu"
3. Tulis gesaan anda (contoh: "Sentiasa catat keadaan cuaca dalam setiap babak")
4. Simpan dan dayakannya
5. Kini semua memori anda akan menyertakan penjejakan cuaca!

**Petua Pro**: Gesaan Sampingan berfungsi paling baik apabila ia spesifik dan fokus. Daripada "jejak semua," cuba "jejak ketegangan romantis antara watak utama."

---

### 🧠 Kawalan Teks Lanjutan dengan Sambungan Regex

**Ingin kawalan mutlak ke atas teks yang dihantar dan diterima daripada AI?** ST Memory Books kini berintegrasi dengan lancar dengan sambungan rasmi **Regex**, membolehkan anda mengubah teks secara automatik menggunakan peraturan tersuai.

Ini adalah ciri lanjutan yang sesuai untuk pengguna yang ingin:
- Membersihkan frasa berulang atau artefak daripada respons AI secara automatik.
- Memformat semula bahagian transkrip sembang sebelum AI melihatnya.
- Menyeragamkan terminologi atau tingkah laku watak dengan cepat.

#### **Cara Ia Berfungsi: Dua Cangkuk Mudah**

Integrasi ini berfungsi dengan menggunakan skrip regex anda yang didayakan pada dua titik kritikal. Anda mengawal skrip mana yang berjalan dengan menetapkan **Penempatan** mereka dalam editor sambungan Regex:

1.  **Mengubah Suai Prompt (Teks Keluar)**
    *   **Penempatan untuk digunakan**: `Input Pengguna`
    *   **Apa yang dilakukannya**: Memintas prompt yang dipasang sepenuhnya (termasuk sejarah sembang, arahan sistem, dll.) sejurus sebelum ia dihantar kepada AI untuk penjanaan memori atau gesaan sampingan.
    *   **Contoh Penggunaan**: Anda boleh mencipta skrip untuk menggantikan semua contoh nama panggilan watak dengan nama penuh mereka secara automatik, memastikan AI mempunyai konteks yang betul.

2.  **Mengubah Suai Respons (Teks Masuk)**
    *   **Penempatan untuk digunakan**: `Output AI`
    *   **Apa yang dilakukannya**: Memintas respons teks mentah daripada AI *sebelum* ia dihuraikan atau disimpan sebagai memori.
    *   **Contoh Penggunaan**: Jika model AI anda sering menyertakan frasa berulang seperti *"Sebagai model bahasa yang besar..."* dalam ringkasannya, anda boleh mencipta skrip regex untuk membuang frasa ini secara automatik daripada setiap memori yang dihasilkannya.

#### **Contoh Mula Pantas: Membersihkan Respons AI**

Katakan model AI anda secara konsisten menambah `(OOC: Semoga ringkasan ini membantu!)` pada penjanaan memorinya. Berikut ialah cara untuk membuangnya secara automatik:

1.  **Pergi ke Sambungan Regex**: Buka menu sambungan utama SillyTavern dan pergi ke **Regex**.
2.  **Cipta Skrip Baharu**: Klik "Buka Editor Regex" untuk mencipta skrip regex baharu.
3.  **Konfigurasikan Skrip**:
    *   **Nama Skrip**: `Bersihkan Nota OOC`
    *   **Cari Regex**: `/\\(OOC:.*?\\)/g` (Ini mencari teks "(OOC: ...)" dan semua yang ada di dalamnya).
    *   **Gantikan Rentetan**: Biarkan kosong untuk memadam teks yang sepadan.
    *   **Mempengaruhi (Penempatan)**: Nyahtanda semua kotak kecuali **Output AI**. Ini adalah langkah yang paling penting!
    *   **Dayakan Skrip**: Pastikan skrip tidak dilumpuhkan.
4.  **Simpan dan Selesai!**

Kini, setiap kali ST Memory Books mendapat respons daripada AI, skrip ini akan berjalan secara automatik, membersihkan teks yang tidak diingini sebelum memori disimpan ke buku cerita anda.

---

## ⚙️ Tetapan yang Sebenarnya Penting

Jangan risau - anda tidak perlu mengkonfigurasi semuanya! Berikut ialah tetapan yang membuat perbezaan terbesar:

### 🎛️ **Kekerapan Ringkasan Auto**
- **20-30 mesej**: Hebat untuk sembang yang terperinci dan lebih perlahan
- **40-60 mesej**: Sesuai untuk perbualan yang lebih pantas dan penuh aksi
- **80+ mesej**: Untuk sembang kumpulan yang sangat pantas atau perbualan santai

### 📝 **Pratonton Memori**
- HIDUPKAN ini untuk menyemak memori sebelum ia disimpan
- Anda boleh mengedit, meluluskan atau menjana semula jika AI terlepas sesuatu yang penting
- Disyorkan untuk jalan cerita yang penting

### 🏷️ **Tajuk Memori**
- Sesuaikan cara memori anda dinamakan
- Gunakan `{{title}}` untuk tajuk yang dijana AI, `{{scene}}` untuk nombor mesej
- Contoh: `"Bab {{title}} ({{scene}})"` menjadi `"Bab Pelarian Hebat (Babak 45-67)"`

### 📚 **Koleksi Memori** (Buku Legenda)
- **Mod auto**: Menggunakan koleksi memori lalai sembang anda (paling mudah)
- **Mod manual**: Pilih koleksi tertentu untuk setiap sembang (untuk organisasi)
- **Cipta auto**: Membuat koleksi baharu secara automatik (baik untuk watak baharu)

---

## 🔧 Penyelesaian Masalah (Apabila Sesuatu Tidak Berfungsi)

### "Saya tidak nampak pilihan Buku Memori!"
- Semak sama ada sambungan dipasang dan didayakan
- Cari ikon tongkat sihir (🪄) di sebelah input sembang anda
- Cuba segarkan semula halaman

### "Butang anak panah (► ◄) tidak muncul!"
- Tunggu 3-5 saat selepas memuatkan sembang - ia memerlukan masa untuk muncul
- Jika masih hilang, segarkan semula halaman
- Pastikan Buku Memori ST didayakan dalam sambungan

### "Ringkasan Auto tidak berfungsi!"
- Semak semula sama ada "Ringkasan Auto" didayakan dalam tetapan Buku Memori
- Adakah selang mesej telah dicapai? Ringkasan auto menunggu mesej baharu yang mencukupi
- Jika anda menangguhkan ringkasan auto, ia mungkin menunggu sehingga kiraan mesej tertentu
- Ringkasan auto hanya memproses mesej baharu sejak memori *terakhir*. Jika anda memadamkan memori lama, ia tidak akan kembali.

### "Saya mendapat ralat tentang buku legenda yang hilang!"
- Pergi ke tetapan Buku Memori
- Sama ada ikat buku legenda pada sembang anda (Mod Automatik) atau dayakan "Cipta buku legenda secara automatik jika tiada"

### "Kadang-kadang ia gagal tanpa sebab!"
- Pastikan Panjang Respons Maksimum anda (dalam pratetap SillyTavern) ditetapkan pada nombor yang cukup besar. Aiko mengesyorkan sekurang-kurangnya 2000 token (Aiko menggunakan 4000.)
- Mesej ralat kini lebih terperinci, tetapi jika anda masih menghadapi masalah sila hubungi Aiko di Github atau Discord.

### "Gesaan tersuai saya tidak berfungsi dengan betul!"
- Semak "Pengurus Gesaan Ringkasan" dalam tetapan Buku Memori
- Pastikan gesaan anda mengarahkan AI untuk membalas dalam **format JSON** (cth., `{ "title": "...", "content": "..." }`)

---

## 🚫 Perkara yang Tidak Dilakukan oleh Buku Memori ST

- **Bukan editor buku legenda umum:** Panduan ini memberi tumpuan kepada entri yang dicipta oleh STMB. Untuk penyuntingan buku legenda umum, gunakan editor buku legenda terbina dalam SillyTavern.

---

## 💡 Mendapatkan Bantuan & Maklumat Lanjut

- **Maklumat lebih terperinci:** [readme.md](../readme.md)
- **Kemas kini terkini:** [changelog.md](../changelog.md)
- **Tukar buku legenda lama:** [lorebookconverter.html](../resources/lorebookconverter.html)
- **Sokongan komuniti:** Sertai komuniti SillyTavern di Discord! (Cari bebenang 📕Buku Memori ST atau DM @tokyoapple untuk bantuan langsung.)
- **Pepijat/ciri:** Menemui pepijat atau mempunyai idea hebat? Buka isu GitHub dalam repositori ini.
